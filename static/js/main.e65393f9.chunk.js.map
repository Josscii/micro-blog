{"version":3,"sources":["oval.svg","MicroBlogs.js","Count.js","App.js","index.js"],"names":["MicroBlogs","useState","issues","setIssues","loading","setLoading","useEffect","fetch","headers","accept","then","response","json","data","catch","console","log","finally","regex","parsedIssues","map","issue","id","date","dayjs","created_at","format","labels","body","replace","trim","images","Array","from","matchAll","match","className","style","color","borderColor","borderWidth","name","image","src","alt","oval","Count","count","setCount","open_issues_count","App","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"yOAAe,MAA0B,iC,OCM1B,SAASA,IAAc,IAAD,EACPC,mBAAS,IADF,mBAC5BC,EAD4B,KACpBC,EADoB,OAELF,oBAAS,GAFJ,mBAE5BG,EAF4B,KAEnBC,EAFmB,KAInCC,qBAAU,WAeRD,GAAW,GAbTE,MARY,yDAQK,CACfC,QAAS,CACPC,OAAQ,oCAGTC,MAAK,SAACC,GAAD,OAAcA,EAASC,UAC5BF,MAAK,SAACG,GACLV,EAAUU,MAEXC,MAAMC,QAAQC,KACdC,SAAQ,kBAAMZ,GAAW,QAK7B,IAEH,IAAMa,EAAQ,2BAERC,EAAejB,EAAOkB,KAAI,SAACC,GAC/B,MAAO,CACLC,GAAID,EAAMC,GACVC,KAAMC,IAAMH,EAAMI,YAAYC,OAAO,oBACrCC,OAAQN,EAAMM,OACdC,KAAMP,EAAMO,KAAKC,QAAQX,EAAO,IAAIY,OACpCC,OAAQC,MAAMC,KAAKZ,EAAMO,KAAKM,SAAShB,IAAQE,KAAI,SAACe,GAAD,OAAWA,EAAM,UAIxE,OACE,qCACE,6BACGhB,EAAaC,KAAI,SAACC,GAAD,OAChB,qBAAIe,UAAU,kCAAd,UACE,qBAAKA,UAAU,4BAAf,SACE,8BACE,+BAAOf,EAAME,OACZF,EAAMM,OAAO,IACZ,sBACES,UAAU,mCACVC,MAAO,CACLC,MAAO,IAAMjB,EAAMM,OAAO,GAAGW,MAC7BC,YAAa,IAAMlB,EAAMM,OAAO,GAAGW,MACnCE,YAAa,OALjB,SAQGnB,EAAMM,OAAO,GAAGc,YAKzB,mBAAGL,UAAU,YAAb,SAA0Bf,EAAMO,OAC/BP,EAAMU,OAAOX,KAAI,SAACsB,GAAD,OAChB,qBAAKC,IAAKD,EAAOE,IAAKF,GAAYA,QApBerB,EAAMC,SAyB9DlB,GAAW,qBAAKgC,UAAU,kBAAkBO,IAAKE,EAAMD,IAAI,aAC1DxC,GACA,yBAAQgC,UAAU,mCAAlB,UACE,sBAAMA,UAAU,kCAChB,sBAAMA,UAAU,yCAAhB,gCACA,sBAAMA,UAAU,wCCvEX,SAASU,IAAS,IAAD,EACJ7C,mBAAS,GADL,mBACvB8C,EADuB,KAChBC,EADgB,KAoB9B,OAjBA1C,qBAAU,WAENC,MAPW,kDAOK,CACdC,QAAS,CACPC,OAAQ,oCAGTC,MAAK,SAACC,GAAD,OAAcA,EAASC,UAC5BF,MAAK,SAACG,GACLmC,EAASnC,EAAKoC,sBAEfnC,MAAMC,QAAQC,OAIlB,IAEI,6CAAM+B,EAAN,YCAMG,MApBf,WACE,OACE,sBAAKd,UAAU,6DAAf,UACE,yBAAQA,UAAU,iDAAlB,UACE,oBAAIA,UAAU,uBAAd,oDACA,cAACU,EAAD,OAEF,yBAASV,UAAU,aAAnB,SACE,cAACpC,EAAD,MAEF,uBAAOoC,UAAU,kBAAjB,SACE,sBAAKA,UAAU,qBAAf,UACE,mDACA,gKCZVe,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,W","file":"static/js/main.e65393f9.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/oval.6226dee9.svg\";","import React, { useEffect, useState } from \"react\";\nimport dayjs from \"dayjs\";\nimport oval from \"./oval.svg\";\n\nconst ISSUE_URL = \"https://api.github.com/repos/josscii/micro-blog/issues\";\n\nexport default function MicroBlogs() {\n  const [issues, setIssues] = useState([]);\n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    function fetchData() {\n      fetch(ISSUE_URL, {\n        headers: {\n          accept: \"application/vnd.github.v3+json\",\n        },\n      })\n        .then((response) => response.json())\n        .then((data) => {\n          setIssues(data);\n        })\n        .catch(console.log)\n        .finally(() => setLoading(false));\n    }\n\n    setLoading(true);\n    fetchData();\n  }, []);\n\n  const regex = /(?:!\\[(.*?)\\]\\((.*?)\\))/g;\n\n  const parsedIssues = issues.map((issue) => {\n    return {\n      id: issue.id,\n      date: dayjs(issue.created_at).format(\"YYYY-MM-DD HH:mm\"),\n      labels: issue.labels,\n      body: issue.body.replace(regex, \"\").trim(),\n      images: Array.from(issue.body.matchAll(regex)).map((match) => match[2]),\n    };\n  });\n\n  return (\n    <>\n      <ul>\n        {parsedIssues.map((issue) => (\n          <li className=\"border rounded p-2 text-sm mb-2\" key={issue.id}>\n            <div className=\"flex justify-between mb-1\">\n              <p>\n                <span>{issue.date}</span>\n                {issue.labels[0] && (\n                  <span\n                    className=\"text-xs px-1 py-0.5 rounded ml-2\"\n                    style={{\n                      color: \"#\" + issue.labels[0].color,\n                      borderColor: \"#\" + issue.labels[0].color,\n                      borderWidth: \"1px\",\n                    }}\n                  >\n                    {issue.labels[0].name}\n                  </span>\n                )}\n              </p>\n            </div>\n            <p className=\"text-base\">{issue.body}</p>\n            {issue.images.map((image) => (\n              <img src={image} alt={image} key={image} />\n            ))}\n          </li>\n        ))}\n      </ul>\n      {loading && <img className=\"mx-auto w-5 h-5\" src={oval} alt=\"loading\" />}\n      {!loading && (\n        <footer className=\"flex justify-center items-center\">\n          <span className=\"border-t border-gray-300 w-10\"></span>\n          <span className=\"text-sm text-gray-300 text-center py-4\">到底了</span>\n          <span className=\"border-t border-gray-300 w-10\"></span>\n        </footer>\n      )}\n    </>\n  );\n}\n","import React, { useEffect, useState } from \"react\";\n\nconst REPO_URL = \"https://api.github.com/repos/josscii/micro-blog\";\n\nexport default function Count() {\n  const [count, setCount] = useState(0);\n\n  useEffect(() => {\n    function fetchData() {\n      fetch(REPO_URL, {\n        headers: {\n          accept: \"application/vnd.github.v3+json\",\n        },\n      })\n        .then((response) => response.json())\n        .then((data) => {\n          setCount(data.open_issues_count);\n        })\n        .catch(console.log);\n    }\n\n    fetchData();\n  }, []);\n\n  return <p>总计{count}条</p>;\n}\n","import \"./App.css\";\nimport MicroBlogs from \"./MicroBlogs\";\nimport Count from \"./Count\";\n\nfunction App() {\n  return (\n    <div className=\"mx-5 md:mx-auto md:w-3/5 md:grid md:grid-cols-4 md:gap-x-5\">\n      <header className=\"flex justify-between items-end py-3 col-span-3\">\n        <h1 className=\"text-3xl font-medium\">Josscii 的个人微博</h1>\n        <Count />\n      </header>\n      <article className=\"col-span-3\">\n        <MicroBlogs />\n      </article>\n      <aside className=\"hidden md:block\">\n        <div className=\"border rounded p-2\">\n          <p>关于我</p>\n          <p>不专业 iOS 程序员，喜欢 Swift，React，学习前端中。</p>\n        </div>\n      </aside>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}